{% extends 'accounting/base.html' %}
{% load i18n %}
{% load humanize %}
{% load evelinks %}

{% block details %}
    <!-- Panels -->
    <div class="row mb-4">
        <div class="col-md-6">
            <div class="card text-white bg-warning">
                <div class="card-body">
                    <h5 class="card-title fw-bold">{% translate "Total Outstanding" %}</h5>
                    <p class="card-text display-6" id="total-outstanding">{{ total_outstanding|floatformat:-1|intcomma|default:"0.00" }} ISK</p>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card text-white bg-danger">
                <div class="card-body">
                    <h5 class="card-title fw-bold">{% translate "Total Unclaimed" %}</h5>
                    <p class="card-text display-6" id="total-outstanding">{{ total_unclaimed|floatformat:-1|intcomma|default:"0.00" }} ISK</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Outstanding Table -->
    <div class="card mb-4">
        <div class="card-body">
            <h5 class="card-title fw-bold mb-3 bg-secondary p-2 rounded text-center">{% translate "Outstanding" %}</h5>
            <table id="outstanding-table" class="table table-striped table-bordered">
                <thead>
                    <tr>
                        <th>{% translate "Name" %}</th>
                        <th>{% translate "Amount" %}</th>
                        <th>{% translate "Days Outstanding" %}</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td colspan="5" class="text-center">
                            {% include "accounting/partials/common/spinner.html" %}
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Unclaimed Table -->
    <div class="card mb-4">
        <div class="card-body">
            <h5 class="card-title fw-bold mb-3 bg-secondary p-2 rounded text-center">{% translate "Unclaimed Items" %}</h5>
            <table id="unclaimed-table" class="table table-striped table-bordered">
                <thead>
                    <tr>
                        <th>{% translate "Character" %}</th>
                        <th>{% translate "Amount" %}</th>
                        <th>{% translate "Notes" %}</th>
                        <th>{% translate "Date" %}</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Tommy Star</td>
                        <td>$150.00</td>
                        <td>Moon Mining</td>
                        <td>2020-01-01 00:00:00</td>
                    </tr>
                    <tr>
                        <td>Tommy Star</td>
                        <td>$50.00</td>
                        <td>Moon Mining</td>
                        <td>2020-01-01 00:00:00</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

{% endblock %}

{% block extra_javascript %}
    <script>
        let urlOutstanding = "{% url 'accounting:ajax_outstanding' %}";
        let urlCorpOutstanding = "{% url 'accounting:corporation_dashboard' 0 %}";
        let urlUserOutstanding = "{% url 'accounting:character_dashboard' 0 %}";
    </script>
    {% include "accounting/bundles/datatables2-js.html"%}
    {% include "bundles/moment-js.html" with locale=True %}
    {% include "accounting/bundles/admin-dashboard-js.html" %}
{% endblock %}

{% block extra_css %}
    {% include "accounting/bundles/datatables2-css.html"%}
    {% include "accounting/bundles/accounting-css.html"%}
{% endblock %}
